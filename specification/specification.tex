\documentclass[a4paper,fleqn,12pt]{article}

%%%%%%%%%%%%%%%%%%%%

\input{../common/common.tex}
\input{../common/project.tex}

\assignment{Project specification}

%%%%%%%%%%%%%%%%%%%%

\pagestyle{plain}
\renewcommand{\headrulewidth}{0.0pt}

\makeatletter
\fancypagestyle{plain}{
	\fancyhf{}
	%\fancyhead[R]{\textit{\@title} - \textit{\@assignment}}
	%\fancyhead[L]{\textit{\@author}}
	\fancyfoot[C]{\thepage}
}
\makeatother

%%%%%%%%%%%%%%%%%%%%

\begin{document}
	
	\input{../common/titlepage.tex}
	
	\pagestyle{plain}
	
	\section{Introduction}
	Many matrix operations involve computing many simpler calculations on the components of the matrix. These calculations are often independent and can be performed in parallel. A processor would compute these sequentially but a specific hardware implementation would be able to compute them in parallel. Adding hardware-based matrix operations to a processor instruction set would allow programs to reduce the number of cycles needed to get the result and so reduce the time taken. As the average clock speed of CPUs has seen very little increase since the early 2000s moving more complicated operations to hardware allows for run time to decrease without decreasing cycle time.
	
	This project aims to develop hardware that can perform matrix operations and integrate that into the instructions of a RISK-V processor to improve the execution time of matrix-heavy programs.
	
	\section{Background}
	\subsection{FPGAs}
	As this project will use a hardware implementation, a platform is needed that can allow fast development and iterations on hardware designs. An FPGA (Field Programmable Gate Array) is a semiconductor device based around a matrix of configurable logic blocks \citep{whatisanfpga}. The user can define what logic function these blocks perform and how they are connected using HDL (Hardware Description Language) programming. Hardware can be designed in HDL and constructed on the FPGA without needing to manually build the circuit.
	
	\subsection{Matrix Operations}
	There are four basic operations with matrices, addition, scalar multiplication, transposition and matrix multiplication. Each element of the result matrices of these functions can be independently calculated allowing for parallelism. In order to fully utilise this all elements of the input matrices must be accessible simultaneous which limits the scalability of the input matrix size the design can handle.
	
	\subsection{RISK-V, Rocket Chip and Chisel}
	For this project, a processor is needed to integrate the matrix accelerator with. RISC-V is an open standard instruction set architecture that can be implemented in a variety of devices such as high-performance boards by SiFive and smaller microcontrollers such as Espressif's ESP32-C3. This adoption means that more software is available for the RISC-V instruction such as Debian's risk64 port. To implement a RISC-V core on an FPGA the Rocket Chip Generator will be used. This is an open-source SoC generator that produces synthesizable RTL for implementation on an FPGA. It also allows for the intergration of custom accelerators as instruction set extentions \citep{rocketchip} which is needed for this project.
	
	Rocket Chip uses the Chisel HDL based on the Scala programming language. This allows for modern programming features to be used and then generate Verilog from this code. The Verilog code can then be synthesised for an FPGA.
	
	\section{Objectives}
	\subsection{Hardware-Based Matrix Operations}
	\begin{enumerate}
		\item [(Must)]  Design and implement matrix multiplication hardware that can calculate results more efficiently than software. It should work for matrices containing integers and should be able to scale to larger matrices.
		\item [(Could)] Add addition and scalar multiplication functions to the design.
		\item [(Could)] Add support for floating point values to the design.
	\end{enumerate}
	\subsection{Integration to RISC-V Core}
	\begin{enumerate}
		\item [(Must)] Generate a RISC-V core and connect it to the matrix accelerator by adding new instructions to the cores instruction set.
		\item [(Must)] Develop software to allow the use of the new instructions in programs.
	\end{enumerate}
	\subsection{Comparison of Hardware Solution Against Software}
	\begin{enumerate}
		\item [(Must)] Develop a program that can benchmark the use of matrix operations through software and the hardware accelerator. Run these tests and compare.
		\item [(Could)] Test and compare an implementation that uses software parallelism.
		\item [(Could)] If other matrix functions are implemented compare these to software and see if these extra functions are worth implementing.
	\end{enumerate}

	\section{Literature Review}
			
	\section{Methodology}
	
	\section{Timeline}
	The planned working hours are set out in the table below giving 12 hours a week. This may change depending on what is currently being worked on.
	
	\begin{table}[h]
		\centering
		\begin{tabular}{c|c|c|c|c|c|}
			\cline{2-6}
			& 14:00 & 15:00 & 16:00 & 17:00 & 18:00 \\ \hline
			\multicolumn{1}{|c|}{Monday}    &       &       &       &       &       \\ \hline
			\multicolumn{1}{|c|}{Tuesday}   &       &       & X     & X     & X     \\ \hline
			\multicolumn{1}{|c|}{Wednesday} &       & X     & X     & X     &       \\ \hline
			\multicolumn{1}{|c|}{Thursday}  &       & X     & X     & X     &       \\ \hline
			\multicolumn{1}{|c|}{Friday}    &       &       & X     & X     & X     \\ \hline
		\end{tabular}
	\end{table}

	The Gantt chart below timetables the progress towards this project. This covers all objectives that must be completed and shows deadline submissions. Additional objectives such as adding extra functionality to the accelerator can be worked if the main objective is completed and there is still allocated time left.
	
	\begin{adjustwidth}{-\oddsidemargin-1in+1cm}{-\rightmargin}
		\centering
		\includegraphics[width=\paperwidth-2cm, frame]{./timeline.png}
	\end{adjustwidth}
	
	\section{Resources}
	This project will require hardware and software resources listed below as well as open-source tools such as Rocket Chip and Git.
	\begin{enumerate}
		\item \textbf{FPGA Development Board - Nexys A7} \newline
		This board will be used to synthesise the HDL generated by this project. It is on loan from the School of Engineering.
		\item \textbf{Vivado Design Suit} \newline
		Provides tools to synthesise and analyse HDL for FPGAs. Educational licence through the School of Engineering
		\item \textbf{vivado-risk-v project} \citep{vivado-risk-v} \newline
		An open-source project that generates RISC-V processors for FPGAs using Rocket Chip.
		\item \textbf{Linux Workstation PC} \newline
		A PC capable of running the Vivado Design Suit tools and the Ubunbtu 20.04 environment that is needed for the vivado-risk-v project. My PC fulfils these requirements.
	\end{enumerate}
	
	\section{Risks}
	Three main risks could harm this project. These are listed below along with mitigations and solutions.
	\begin{enumerate}
		\item \textbf{Damage to FPGA Development Board} \newline
		This board is on loan from the School of Engineering so a replacement could be obtained. To reduce the chance of damage the board will only be transported when necessary and kept in its protective packaging when not in use.
		\item \textbf{Damage to Workstation} \newline
		Engineering computer labs could be used to run Vivado Design Suit and DCS labs can provide a Linux environment if needed.
		\item \textbf{Data Loss} \newline
		Git version control will be used to track changes and all data relevant to the project will be backed up to GitHub providing an easy way to recover data. A log will be kept of the process to generate data such as the use of vivado-risk-v so it can be repeated if necessary.
	\end{enumerate}
	
	\section{Legal, Social, Ethical and Professional Issues}
	This project should not present any social, ethical or professional issues and does not require working with people. There is no intent to profit from this project so no legal issues should arise.
	
	\newpage
	\bibliographystyle{../common/plainnat}
	\bibliography{../common/bibliography}
	
\end{document}
